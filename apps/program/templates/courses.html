<!DOCTYPE html>
<html>
<head>
	<title>HST | Registration</title>
	{% load staticfiles %}
</head>
<style type="text/css">
	* {
		/*vertical-align: top;*/
	}
	h2 {
		text-decoration: underline;
		text-align: center;
	}
	.student_menu {
		padding: 5px;
		padding-bottom: 0px;
		font-size: 0;
	}
	.tab {
		font-size: 16px;
		display: inline-block;
		border: solid black 1px;
		border-top-left-radius: 10px;
		border-top-right-radius: 10px;
		border-bottom: solid black;
		text-align: center;
		padding: 5px;
		text-decoration: none;
		width: calc(100% / {{students|length}} - 12px)
	}
	.tab div {
		color: black;
	}
	.selected_tab {
		border-bottom: solid white;
		text-decoration: none;
		font-weight: bold;
	}
	.selected_tab div {
		color: black;
	}
	.course_menu {
		border: solid;
		border-top: none;
		padding: 2px;
		margin: 0 5px 5px 5px;
	}
	table {
		display: inline-block;
		border-spacing: 0;
	}
	.outlined tr {
		outline: solid black 1px;
	}
	td {
		padding: 5px;
	}
	.ib {
		display: inline-block;
	}
	.il {
		display: inline;
	}
	.pane {
		display: block;
	}
	.right {
		text-align: right;
	}
	.center {
		text-align: center;
	}
	button, a.view {
		display: none;
	}
	/*Bold Black on White*/
	.eligible td:nth-child(2), .legend .eligible td:nth-child(1) {font-weight: bold;} 
		.eligible form.enroll button {display: inline;}
	.aud_drop td:nth-child(2), .legend .aud_drop td:nth-child(1) {font-weight: bold;}
		.aud_drop form.enroll button {display: inline;}
	/*Blue*/
	.aud_pend, .pendpass, .pendfail, .pend_pub {background-color: #8af} 
		.aud_pend form.drop button {display: inline;}
	/*Orange*/
	/*.invoiced {background-color: #fb8}*/
		.invoiced form.drop button {display: inline;}
	/*Green*/
	.enrolled {background-color: #8f8}
		.enrolled a.view {display: inline;}
	/*Yellow*/
	.invoiced, .need_pay {background-color: #ff8}
		.need_pay form.drop button {display: inline;}
	.aud_pass {background-color: #ff8}
		.aud_pass form.drop button {display: inline;}
	/*Blue*/
	.aud_need {color: blue;}
	.aud_need td:nth-child(2), .legend .aud_need td:nth-child(1) {font-weight: bold;}
		.aud_need form.aud button {display: inline;}
	/*Half Gray*/
	.need_cur, .needboth {background-color: #aaa}
		.need_cur button.enroll_disabled, .needboth button.enroll_disabled {display: inline;}
	/*Gray*/
	.not_elig {background-color: #777}
		.not_elig button.enroll_disabled {display: inline;}
	.aud_fail {background-color: #777}
	.fail_pub {background-color: #777}
	/*Red Gray*/
	.conflict {background-color: #a88}
		.conflict button.enroll_disabled {display: inline;}
	/*Purple*/
	.aud_lock {background-color: #b8f}
		.aud_lock button.drop_disabled {display: inline;}

	.invoice {
		margin: 15px;
		display: block;
	}

	/*.legend {display: none;}*/
	td.cart {
		vertical-align: top;
	}
	td.legend {
		vertical-align: bottom;
		padding-bottom: 0;
	}

</style>
<script type="text/javascript">
	function go(url) {
		window.location.replace(url)
	}
	function mo(url) {
		window.location.href = url
	}
</script>
<body>

<table>
	<tr>
		<td rowspan="2">
			
			<div class="student_menu">
				{% for student in students %}
				<div onclick="go('/register/student/{{student.id}}/')" class="tab{% if student.id|add:0 == current_student.id|add:0 %} selected_tab {% endif %}" title="{{student}}, age {{student.age}}">
					{{student.prefer}}
				</div>
				{% endfor %}
			</div>
			<div class="course_menu">
				<table class="outlined">
					<thead>
						<th>{{reg_year}}</th>
						<th>Class</th>
						<th>Day</th>
						<th>Time</th>
						<th>Tuition</th>
						<th>Hours</th>
					</thead>
					{% for enr in menu %}
					<tr class="{{enr.status}}" title="{{enr.public_title}}">
						<td class="center">
							<form class="enroll" action="enroll/">
								<input type="hidden" name="course_id" value="{{enr.course.id}}">
								<input type="hidden" name="status" value="{{enr.status}}">
								<button>Enroll</button>
							</form>
							<form class="aud" action="enroll/">
								<input type="hidden" name="course_id" value="{{enr.course.id}}">
								<input type="hidden" name="status" value="{{enr.status}}">
								<button>Audition</button>
							</form>
							<form class="drop" action="drop/">
								<input type="hidden" name="enr_id" value="{{enr.id}}">
								<input type="hidden" name="status" value="{{enr.status}}">
								<button>Drop</button>
							</form>
							<button class="enroll_disabled" disabled>Enroll</button>
							<a class="view" href="/register/invoice/{{enr.invoice_id}}">Invoice</a>
						</td>
						<td class="center">{{enr.course.title}}</td>
						<td>{{enr.course.day.short}}</td>
						<td>{{enr.course.start}} - {{enr.course.end}}{{enr.course.tradition.display_semester}}</td>
						<td class="right">${{enr.course.tuition}}</td>
						<td class="right">{{enr.course.vol_hours}}</td>
					</tr>
					{% endfor %}
				</table>
			</div>

		</td>
		<td class="cart">
			
			<div class="cart">
				<h2>Enrollment Cart</h2>
				<center>
					<table class="outlined">
						<thead>
							<th>Student</th>
							<th>Class</th>
							<th>Hours</th>
							<th>Tuition</th>
						</thead>
						{% for enrollment in cart %}
						<tr {% if enrollment.invoice %} onclick="mo('/register/invoice/{{enrollment.invoice.id}}')" {% endif %} class="{{enrollment.status}}" title="Enrollment #{{enrollment.id}}">
							<td>{% if enrollment.course.e %}{{enrollment.student.prefer}}{% endif %}</td>
							<td class="center">{{enrollment.course.title}}</td>
							<td class="right">{{enrollment.course.vol_hours}}</td>
							<td class="right">${{enrollment.course.tuition|floatformat:2}}</td>
						</tr>
						{% endfor %}
						<tr class="total">
							<td><b>Total:</b></td>
							<td class="center">{{nCourses.total}}</td>
							<td class="right">{{hours.total}}</td>
							<td class="right">${{tuition.total|floatformat:2}}</td>
						</tr>
						<tr class="total">
							<td><b>Pending:</b></td>
							<td class="center">{{nCourses.pend}}</td>
							<td class="right">{{hours.pend}}</td>
							<td class="right">${{tuition.pend|floatformat:2}}</td>
						</tr>
						<tr class="total">
							<td><b>Paid:</b></td>
							<td class="center">{{nCourses.paid}}</td>
							<td class="right">{{hours.paid}}</td>
							<td class="right">${{tuition.paid|floatformat:2}}</td>
						</tr>
						<tr class="total">
							<td><b>Due:</b></td>
							<td class="center">{{nCourses.unpaid}}</td>
							<td class="right">{{hours.unpaid}}</td>
							<td class="right">${{tuition.unpaid|floatformat:2}}</td>
						</tr>
					</table>
					<form method="POST" action="/register/process/">{% csrf_token %}
						<button {% if not invoiceable %} disabled {% endif %} class="invoice">Generate Invoice</button>
					</form>
				</center>
				<a href="/family/{{family.id}}/invoices/">All Invoices</a>
			</div>

		</td>
	</tr>
	<tr>
		<td>
			
			<div class="legend">
				<h2>Legend</h2>
				<table class="legend outlined">
					<tr class="eligible">
						<td>Student is eligible to enroll in this class.</td>
					</tr>
					<tr class="aud_need">
						<td>Student is eligible for an audition or skill assessment for this class.</td>
					</tr>
					<tr class="not_elig">
						<td>Student is not eligible for this class.</td>
					</tr>
					<tr class="need_cur">
						<td>Student will be eligible, but must enroll in at least 1 other class first.</td>
					</tr>
					<tr class="conflict">
						<td>Student is registered for another class at the same time as this.</td>
					</tr>
					<tr class="aud_pend">
						<td>Student has scheduled an audition or skill assessment for this class.</td>
					</tr>
				<!-- 	<tr class="aud_pass">
						<td>Student passed an audition for this class and may now enroll in it.</td>
					</tr> -->
					<tr class="need_pay">
						<td>This class has been added to the cart, pending tuition payment.</td>
					</tr>
<!-- 					<tr class="invoiced">
						<td>Student's registration for this class is on an unpaid invoice.</td>
					</tr> -->
					<tr class="enrolled">
						<td>Student is successfully enrolled this class.</td>
					</tr>
				</table>
			</div>
			
		</td>
	</tr>
</table>


</body>
</html>